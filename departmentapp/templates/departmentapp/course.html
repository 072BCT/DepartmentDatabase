{% extends 'departmentapp/base.html' %}
{% load static %}

{% block sidebar %}
    {% include 'departmentapp/sidebar.html' with dept_code=result.department.dept_code %}
{% endblock %}

{% block content %}
    {% if not result.error %}
    <div class="row">
         <div class="page-header col-lg-12">
             <h3>Courses Offered</h3>
         </div>
    </div>
    <div class="row">
        <div class="col-md-9">
                <form class="form" method="POST">
                    {% csrf_token %}
                    <div class="col-md-5 form-group row">
                        <div class="form-group input-group">
                            <input type="text" class="form-control" id="courseCode" name="Course Code" placeholder="Search by Course Code ">
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-5 col-md-offset-1 form-group row">
                        <div class="form-group input-group">
                            <input type="text" class="form-control" id="deptCode" name="Department Code" placeholder="Search by Department Code ">
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>
                            </span>
                        </div>
                    </div>
                </form>
            </div>
        <div class="col-lg-3">
            <button class="btn btn-success pull-right" data-toggle="modal" data-target="#addAcademicModal" >
                    <span class="glyphicon glyphicon-pencil"></span> Add Course
            </button>
            <div class="modal" id="addAcademicModal" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="modal-title"><h3>Add Course
                                <button class="close" data-dismiss="modal">&times</button></h3>
                            </div>

                        </div>
                        <div class="modal-body">

                            <form role="form">
                                <strong class="text-info">Course Details</strong>
                                <div class="form-group">
                                    <label for="courseCode">Course Code </label>
                                    <input type="text" required id="courseCode" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label for="cname">Course Name </label>
                                    <input type="text" required id="cname" class="form-control">
                                </div>

                            </form>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary">OK</button>
                            <button class="btn btn-default" data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="col-lg-7 col-lg-offset-1" style="margin-top: 3%">
        <div id="table-wrapper" class="row">
                <table width="100%" class="table table-striped table-bordered table-hover" id="teacher-table">
                    <thead>
                        <tr>
                            <th>Course Code</th>
                            <th>Course Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for course in result.course_list %}
                            <tr class="course-row" data-href="{% url 'departmentapp:dashboard' result.department.dept_code %}">
                                <td>{{ course.course_code }}</td>
                                <td>{{ course.course_name }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% else %}
        <div class="alert alert-danger">
            <h3>ERROR</h3>
            <p>{{ result.message }}</p>
        </div>
    {% endif %}

{% endblock %}

{% block extrajs %}
    <script>
        var staffrows = document.querySelectorAll('.course-row');
        staffrows.forEach(function (row){
            row.addEventListener('mouseenter',function (event) {
               this.style.backgroundColor = '#34373a';
               this.style.color = 'white';
               console.log('MouseEnter: '+this.getAttribute('data-href'));
            });
            row.addEventListener('mouseleave',function (event) {
               this.style.backgroundColor = 'white';
               this.style.color = '#333';
               console.log('MouseLeave: '+this.getAttribute('data-href'));
            });
            row.addEventListener('click',function (event) {
                window.location = this.getAttribute('data-href');
                console.log('MouseOver: '+this.getAttribute('data-href'));
            });
        })
    </script>
{% endblock %}
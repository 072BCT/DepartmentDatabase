{% extends 'departmentapp/base.html' %}
{% load static %}

{% block sidebar %}
    {% include 'departmentapp/sidebar.html' with dept_code=result.department.dept_code %}
{% endblock %}

{% block content %}
    {% if not result.error %}
    <div class="row">
         <div class="page-header col-lg-12">
             <h3>Non Academic Staff</h3>
         </div>
    </div>
    <div class="row">

        <div class="col-lg-12">
            <a href="{% url 'departmentapp:add_nonacademic' result.department.dept_code %}" class="btn btn-success pull-right" >
                    <span class="glyphicon glyphicon-pencil"></span> Add Non-Academic Staff
            </a>
        </div>

        <div class="col-md-12" style="margin-top: 2%">
                <form class="form" method="POST">
                    {% csrf_token %}

                    <div class="form-group">
                        <div class="col-lg-2">
                        <input type="text" class="form-control" id="sStaff_id" placeholder="Staff ID ">
                        </div>

                        <div class="col-lg-2">
                        <input type="text" class="form-control" id="sFname" placeholder="First Name ">
                        </div>
                        <div class="col-lg-2">
                        <input type="text" class="form-control" id="sDesignation" placeholder="Designation ">
                        </div>
                        <div class="col-lg-2">
                        <input type="text" class="form-control" id="sPost" placeholder="Post ">
                        </div>
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>
                        </span>
                    </div>


                </form>
        </div>


        <div class="col-lg-12" style="margin-top: 3%">
        <div id="table-wrapper" class="row">
                <table width="100%" class="table table-striped table-bordered table-hover" id="teacher-table">
                    <thead>
                        <tr>
                            <th>Staff ID</th>
                            <th>Staff Name</th>
                            <th>E-mail</th>
                            <th>Phone Number</th>
                            <th>Post</th>
                        </tr>
                    </thead>
                    <tbody>
                            {% for staff in result.staff_list %}
                                <tr class="staff-row" data-href="{% url 'departmentapp:dashboard' result.department.dept_code %}">
                                    <td>{{ staff.staff_id }}</td>
                                    <td>{{ staff.staff_fname }} {{ staff.staff_mname }} {{ staff.staff_lname }}</td>
                                    <td>{{ staff.email }}</td>
                                    <td>{{ staff.mobile_contact }}</td>
                                    <td>{{ staff.post_name }}</td>
                                </tr>
                            {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% else %}
        <div class="alert alert-danger">
            <h3>ERROR</h3>
            <p>{{ result.message }}</p>
        </div>
    {% endif %}

{% endblock %}

{% block extrajs %}
    <script>
        var staffrows = document.querySelectorAll('.staff-row');
        staffrows.forEach(function (row){
            row.addEventListener('mouseenter',function (event) {
               this.style.backgroundColor = '#34373a';
               this.style.color = 'white';
               console.log('MouseEnter: '+this.getAttribute('data-href'));
            });
            row.addEventListener('mouseleave',function (event) {
               this.style.backgroundColor = 'white';
               this.style.color = '#333';
               console.log('MouseLeave: '+this.getAttribute('data-href'));
            });
            row.addEventListener('click',function (event) {
                window.location = this.getAttribute('data-href');
                console.log('MouseOver: '+this.getAttribute('data-href'));
            });
        })
    </script>
{% endblock %}